<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Honego</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        html {
            height: 100%;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f8f9fa;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            flex: 1;
            display: flex;
        }

        aside {
            width: 250px;
            background-color: #1c2121;
            padding: 20px;
            box-shadow: 2px 0px 10px rgba(0, 0, 0, 0.1);
            color: #f6f6f6;
        }

        aside ul {
            list-style-type: none;
            padding: 0;
        }

        aside ul li {
            margin-bottom: 15px;
        }

        aside ul li a {
            text-decoration: none;
            color: #f6f6f6;
            padding: 10px 20px;
            display: block;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        aside ul li a:hover {
            background-color: #f8f9fa;
            color: #333;
        }

        .main-content {
            flex-grow: 1;
            padding: 20px;
            background-color: #fff;
            box-shadow: -2px 0px 10px rgba(0, 0, 0, 0.1);
        }

        footer {
            background-color: #1c2121;
            color: #f6f6f6;
            padding: 10px 20px;
            text-align: center;
        }

        .profile-form {
            max-width: 500px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .profile-form label {
            display: block;
            margin-bottom: 5px;
        }

        .profile-form input[type="text"],
        .profile-form input[type="email"],
        .profile-form input[type="password"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .profile-form button {
            background: #5cb85c;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .profile-form button:hover {
            background: #4cae4c;
        }

        /* Updated styles for the drag and drop functionality */
        .drag-area {
            display: flex;
            justify-content: center;
            gap: 30px; /* Adds more space between the columns */
            margin-top: 20px;
        }

        .products-area,
        .selected-area {
            width: calc(50% - 15px); /* Each area takes half of the container width minus the gap */
            padding: 20px;
            border: 2px solid #ccc;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            min-height: 300px; /* Triple the default height */
max-height: 300px;
overflow-y: auto;
            overflow-y: auto;
        }

        .products-area h3,
        .selected-area h3 {
            margin-bottom: 15px;
            text-align: center;
            color: #333;
            font-size: 1.5em;
        }

        .product-item {
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #f9f9f9;
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s;
min-height: 30px;
max-height: 30px;
        }

        .product-item:hover {
            background-color: #f0f0f0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .drag-over {
            background-color: #e1e1e1;
        }

.comments-box {
            max-width: 100%;
            margin: 20px 0;
            padding: 20px;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .comments-box textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            min-height: 150px; /* Set a minimum height for the textarea */
            margin-bottom: 20px;
        }

        .comments-box label {
            display: block;
            margin-bottom: 5px;
        }
/* Style for the buttons */
        .form-actions {
            text-align: center; /* Center the buttons */
            margin-top: 20px;
        }

        .form-actions button {
            padding: 10px 20px;
            margin-right: 10px; /* Space between buttons */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .form-actions button:not(:last-child) {
            margin-right: 20px;
        }

        .form-actions button:hover {
            opacity: 0.9; /* Slight fade effect on hover */
        }

        /* Specific styles for each button */
        .btn-draft { background-color: #6c757d; color: white; }
        .btn-preview { background-color: #17a2b8; color: white; }
        .btn-pdf { background-color: #dc3545; color: white; }
        .btn-email { background-color: #28a745; color: white; }

    </style>
</head>
<body>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

<script>

// Konfiguracja Firebase
  var firebaseConfig = {
apiKey: "AIzaSyDd_qtDIeM4Uy4HQdUPr_vIrmwc-Tve_RU",
        authDomain: "honego-52c31.firebaseapp.com",
        projectId: "honego-52c31",
        storageBucket: "honego-52c31.appspot.com",
        messagingSenderId: "897927654843",
        appId: "1:897927654843:web:54bf5b398542dfd076a89e"

 };
  firebase.initializeApp(firebaseConfig);

  firebase.auth().onAuthStateChanged((user) => {
    if (!user) {
      window.location.href = 'index.html'; // Przekierowanie na stronê logowania
    }
    // U¿ytkownik jest zalogowany
  });

// Funkcja wylogowywania
  function logout() {
    firebase.auth().signOut().then(() => {
      // Wylogowanie udane, przekierowanie na index.html
      window.location.href = 'index.html';
    }).catch((error) => {
      // Obs³uga b³êdów
      console.error('Logout Failed', error);
    });
  }
</script>

    <div class="container">

        <aside>
            <h1>Honego</h1>
            <ul>
<li><a href="dashboard.html"><i class="fas fa-chart-bar"></i> Dashboard</a></li>
            <li><a href="my-offers.html"><i class="fas fa-folder"></i> My Offers</a></li>
            <li><a href="new-offer.html"><i class="fas fa-plus"></i> Create New Offer</a></li>
            <li><a href="contacts.html"><i class="fas fa-address-book"></i> Contacts</a></li>
            <li><a href="product-library.html"><i class="fas fa-cube"></i> Product/Service Library</a></li>
            <li><a href="account-settings.html"><i class="fas fa-cogs"></i> Account Settings</a></li>
            <li><a href="#" onclick="logout();"><i class="fas fa-sign-out-alt"></i> Log out</a></li>
        </ul>    
        </aside>

        <div class="main-content">
            <div class="profile-form">
                <h2>Create New Offer</h2>
                <label for="clientName">Client Name/Company:</label>
                <input type="text" id="clientName" name="clientName" required>

                <label for="address">Address:</label>
                <input type="text" id="address" name="address" required>

                <label for="clientEmail">Client Email:</label>
                <input type="email" id="clientEmail" name="clientEmail" required>

                <label for="receiversName">Receiver's Name:</label>
                <input type="text" id="receiversName" name="receiversName" required>

                <button type="submit">Create Offer</button>
            </div>
            
            <!-- Drag and Drop Area outside of the form -->
            <div class="drag-area">
                <div class="products-area" ondragover="allowDrop(event)">
                    <h3>Available Products</h3>
                    <div draggable="true" ondragstart="drag(event)" id="product1" class="product-item" data-value="900">Meeting room 110m2 - 900</div>
<div draggable="true" ondragstart="drag(event)" id="product2" class="product-item" data-value="5000">Ball room 500m2 - 5000</div>
<div draggable="true" ondragstart="drag(event)" id="product3" class="product-item" data-value="330">Double Room Standard 15m2 - 330</div>

<!-- Add more draggable products with their respective data-value attributes -->

                    <!-- Add more draggable products here -->
                </div>
                <div class="selected-area" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <h3>Selected Products</h3>
                    <!-- Dropped products will appear here -->
<div id="totalSum">Total Sum: 0 PLN</div>

                </div>
            </div>
<!-- Additional comments box -->
    <div class="main-content">
        <div class="comments-box">
            <label for="additionalComments">Additional Notes & Conditions:</label>
            <textarea id="additionalComments" name="additionalComments" placeholder="Enter any additional notes and conditions here..."></textarea>

 <!-- File attachment input for multiple files -->
<label for="fileAttachment">Attach Files:</label>
<input type="file" id="fileAttachment" name="fileAttachment[]" multiple>
<div id="fileList"></div>
</div>

        </div>
 <!-- Buttons for form actions -->
    <div class="main-content">
        <div class="form-actions">
            <button type="button" class="btn-draft">Save as Draft</button>
            <button type="button" class="btn-preview">Preview</button>
            <button type="button" class="btn-pdf">Generate PDF</button>
            <button type="button" class="btn-email">Send by Email</button>
        </div>
    </div>
    </div>
        </div>

    </div>


    <footer>
        &copy; 2023 Honego - All Rights Reserved
    </footer>

<script>

function calculateTotal() {
        let sum = 0;

// Get all the products in the selected area
        const selectedProducts = document.querySelectorAll('.selected-area .product-item');
        selectedProducts.forEach(function(product) {
            // Parse the data-value attribute to a number and add it to the sum
            sum += Number(product.getAttribute('data-value'));
        });
        // Display the total sum
        document.getElementById('totalSum').textContent = `Total Sum: ${sum} PLN`;
    }

        // Funkcje obs³ugi drag and drop
        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text/plain", event.target.id);
        }

        function drop(event) {
            event.preventDefault();
            const data = event.dataTransfer.getData("text/plain");
            const draggableElement = document.getElementById(data);
            let dropzone = event.target;
 calculateTotal(); // Call calculateTotal after a product is dropped

            while (!dropzone.classList.contains('products-area') && !dropzone.classList.contains('selected-area')) {
                dropzone = dropzone.parentNode;
            }

            if (dropzone && (dropzone.classList.contains('products-area') || dropzone.classList.contains('selected-area'))) {
                dropzone.appendChild(draggableElement);
            }
        }

        // Nowa funkcja do obs³ugi przenoszenia produktów przez podwójne klikniêcie
        function moveProduct(event) {
            const product = event.target;
            const currentArea = product.parentNode;
            const isProductAvailable = currentArea.classList.contains('products-area');
            const destinationArea = isProductAvailable ? document.querySelector('.selected-area') : document.querySelector('.products-area');

            destinationArea.appendChild(product);
calculateTotal();
        }

        // Dodajemy obs³ugê podwójnego klikniêcia do wszystkich produktów
        window.onload = function() {
            const products = document.querySelectorAll('.product-item');
            products.forEach(function(product) {
                product.addEventListener('dblclick', moveProduct);
            });
        };

// Function to update the file list display
    function updateFileList() {
        var input = document.getElementById('fileAttachment');
        var fileListContainer = document.getElementById('fileList');
        fileListContainer.innerHTML = ''; // Clear the list

        // Display each file in the list with a remove button
        for (let i = 0; i < input.files.length; i++) {
            let file = input.files[i];
            let fileDiv = document.createElement('div');
            fileDiv.innerHTML = file.name + ' <a href="#" onclick="removeFile(event, ' + i + ');">&times;</a>';
            fileListContainer.appendChild(fileDiv);
        }
    }

    // Function to remove a file from the list
    function removeFile(event, index) {
    event.preventDefault(); // Prevent the link from changing the URL hash

    var dt = new DataTransfer(); // Use DataTransfer to manipulate file input
    var input = document.getElementById('fileAttachment');
    var { files } = input;

    // Add all files from the file input to the DataTransfer object except the one to be removed
    for (let i = 0; i < files.length; i++) {
        if (index !== i) {
            dt.items.add(files[i]);
        }
    }

    // Update the file input with the new set of files
    input.files = dt.files;
    updateFileList(); // Update the list display
}

    // Event listener to update the file list whenever files are selected
    document.getElementById('fileAttachment').addEventListener('change', updateFileList);

    // ...existing script elements...
</script>
</body>
</html>