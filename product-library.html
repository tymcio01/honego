<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Library - AutoOffer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <button onclick="location.href='dashboard.html'" style="position: absolute; top: 10px; left: 10px;">Back to Dashboard</button>
        <h2>Product Library</h2>
        
        <div class="product-add">
            <h3>Add/Edit Product</h3>
            <label for="productName">Product Name:</label>
            <input type="text" id="productName" placeholder="Enter product name">
            <label for="productDescription">Description:</label>
            <textarea id="productDescription" rows="3" placeholder="Enter product description"></textarea>
            <label for="productPrice">Price:</label>
            <input type="number" id="productPrice" placeholder="Enter product price">
            <button id="saveProductButton">Save Product</button>
        </div>
        
        <div class="product-list">
            <h3>Existing Products</h3>
            <!-- This section will be populated with products -->
        </div>
    </div>

    <script>
        let selectedProductIndex = null;

        function saveProduct() {
            const productName = document.getElementById('productName').value;
            const productDescription = document.getElementById('productDescription').value;
            const productPrice = document.getElementById('productPrice').value;

            let products = JSON.parse(localStorage.getItem('products')) || [];

            const product = {
                name: productName,
                description: productDescription,
                price: productPrice
            };

            if (selectedProductIndex !== null) {
                products[selectedProductIndex] = product;
                selectedProductIndex = null;
            } else {
                products.push(product);
            }

            localStorage.setItem('products', JSON.stringify(products));

            document.getElementById('productName').value = "";
            document.getElementById('productDescription').value = "";
            document.getElementById('productPrice').value = "";
            displayProducts();
        }

        function deleteProduct(index) {
            let products = JSON.parse(localStorage.getItem('products')) || [];
            products.splice(index, 1);
            localStorage.setItem('products', JSON.stringify(products));
            displayProducts();
        }

        function editProduct(index) {
            let products = JSON.parse(localStorage.getItem('products')) || [];
            const product = products[index];
            selectedProductIndex = index;

            document.getElementById('productName').value = product.name;
            document.getElementById('productDescription').value = product.description;
            document.getElementById('productPrice').value = product.price;
        }

        function displayProducts() {
            const products = JSON.parse(localStorage.getItem('products')) || [];
            const productListDiv = document.querySelector('.product-list');
            productListDiv.innerHTML = '';

            products.forEach((product, index) => {
                const productDiv = document.createElement('div');
                productDiv.classList.add('product-item');

                productDiv.innerHTML = `
                    <span class="product-name">${product.name}</span>
                    <span class="product-description">${product.description}</span>
                    <span class="product-price">$${product.price}</span>
                    <button onclick="editProduct(${index})">Edit</button>
                    <button onclick="deleteProduct(${index})">Delete</button>
                `;

                productListDiv.appendChild(productDiv);
            });
        }

        document.getElementById('saveProductButton').addEventListener('click', saveProduct);
        window.onload = displayProducts;
    </script>
</body>
</html>